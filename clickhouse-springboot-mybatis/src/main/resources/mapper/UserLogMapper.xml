<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.clickhouse.mapper.UserLogMapper">

  <insert id="batchInsert">
    INSERT INTO user_log (id, username, age, created_at)
    VALUES
    <foreach collection="list" item="u" separator=",">
      (#{u.id}, #{u.username}, #{u.age}, #{u.createdAt})
    </foreach>
  </insert>

  <select id="findAll" resultType="com.example.clickhouse.UserLog">
    SELECT id, username, age, created_at AS createdAt FROM user_log
  </select>

  <update id="updateAge">
    ALTER TABLE user_log UPDATE age = #{age} WHERE id = #{id}
  </update>

  <delete id="deleteById">
    ALTER TABLE user_log1 DELETE WHERE id = #{id}
  </delete>

</mapper>
